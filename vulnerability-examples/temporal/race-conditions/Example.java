public class Example {

    private static final int NUM_THREADS = 5;
    private static final int ITERATIONS = 100_000;
    private static int sharedCounter = 0;

    public static void main(String[] args) throws InterruptedException {
        Thread[] threads = new Thread[NUM_THREADS];

        // Create threads
        for (int i = 0; i < NUM_THREADS; i++) {
            threads[i] = new Thread(() -> {
                for (int j = 0; j < ITERATIONS; j++) {
                    sharedCounter++; // Not synchronized, not atomic!
                }
            });
            threads[i].start();
        }

        // Join threads
        for (int i = 0; i < NUM_THREADS; i++) {
            threads[i].join();
        }

        // Print results
        System.out.println("Final counter value: " + sharedCounter);
        System.out.println("Expected value: " + (NUM_THREADS * ITERATIONS));
    }
}
